<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.example.forevernote.ui.controller.MainController">
    
    <!-- Top Menu Bar -->
    <top>
        <VBox>
            <MenuBar fx:id="menuBar">
                <Menu text="File">
                    <MenuItem text="New Note" onAction="#handleNewNote" accelerator="Shortcut+N"/>
                    <MenuItem text="New Folder" onAction="#handleNewFolder" accelerator="Shortcut+Shift+N"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Save" onAction="#handleSave" accelerator="Shortcut+S"/>
                    <MenuItem text="Save All" onAction="#handleSaveAll" accelerator="Shortcut+Shift+S"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Import" onAction="#handleImport"/>
                    <MenuItem text="Export" onAction="#handleExport" accelerator="Shortcut+E"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Exit" onAction="#handleExit" accelerator="Shortcut+Q"/>
                </Menu>
                
                <Menu text="Edit">
                    <MenuItem text="Undo" onAction="#handleUndo" accelerator="Shortcut+Z"/>
                    <MenuItem text="Redo" onAction="#handleRedo" accelerator="Shortcut+Y"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Cut" onAction="#handleCut" accelerator="Shortcut+X"/>
                    <MenuItem text="Copy" onAction="#handleCopy" accelerator="Shortcut+C"/>
                    <MenuItem text="Paste" onAction="#handlePaste" accelerator="Shortcut+V"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Find" onAction="#handleFind" accelerator="Shortcut+F"/>
                    <MenuItem text="Replace" onAction="#handleReplace" accelerator="Shortcut+H"/>
                </Menu>
                
                <Menu text="View">
                    <MenuItem text="Toggle Sidebar" onAction="#handleToggleSidebar" accelerator="F9"/>
                    <MenuItem text="Zoom In" onAction="#handleZoomIn" accelerator="Shortcut+Plus"/>
                    <MenuItem text="Zoom Out" onAction="#handleZoomOut" accelerator="Shortcut+Minus"/>
                    <MenuItem text="Reset Zoom" onAction="#handleResetZoom" accelerator="Shortcut+0"/>
                    <SeparatorMenuItem/>
                    <Menu text="Theme">
                        <RadioMenuItem text="Light" selected="true" onAction="#handleLightTheme"/>
                        <RadioMenuItem text="Dark" onAction="#handleDarkTheme"/>
                        <RadioMenuItem text="System" onAction="#handleSystemTheme"/>
                    </Menu>
                </Menu>
                
                <Menu text="Tools">
                    <MenuItem text="Search" onAction="#handleSearch" accelerator="Shortcut+Shift+F"/>
                    <MenuItem text="Tags Manager" onAction="#handleTagsManager"/>
                    <MenuItem text="Preferences" onAction="#handlePreferences"/>
                </Menu>
                
                <Menu text="Help">
                    <MenuItem text="Documentation" onAction="#handleDocumentation"/>
                    <MenuItem text="Keyboard Shortcuts" onAction="#handleKeyboardShortcuts" accelerator="F1"/>
                    <MenuItem text="About" onAction="#handleAbout"/>
                </Menu>
            </MenuBar>
            
            <!-- Toolbar -->
            <HBox styleClass="toolbar" spacing="10" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="5" right="10" bottom="5" left="10"/>
                </padding>
                
                <Button text="New Note" onAction="#handleNewNote" styleClass="toolbar-button"/>
                <Button text="New Folder" onAction="#handleNewFolder" styleClass="toolbar-button"/>
                <Separator orientation="VERTICAL"/>
                <Button text="Save" onAction="#handleSave" styleClass="toolbar-button"/>
                <Button text="Delete" onAction="#handleDelete" styleClass="toolbar-button"/>
                <Separator orientation="VERTICAL"/>
                
                <!-- Search Box -->
                <TextField fx:id="searchField" promptText="Search notes..." prefWidth="200" styleClass="search-field"/>
                <Button text="ðŸ”" onAction="#handleSearch" styleClass="search-button"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- View Options -->
                <ToggleButton fx:id="listViewButton" text="ðŸ“‹" selected="true" styleClass="view-toggle"/>
                <ToggleButton fx:id="gridViewButton" text="âŠž" styleClass="view-toggle"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- Main Content Area -->
    <center>
        <SplitPane fx:id="mainSplitPane" dividerPositions="0.25">
            <!-- Left Sidebar -->
            <VBox styleClass="sidebar">
                <!-- Navigation Tabs -->
                <TabPane fx:id="navigationTabPane" tabClosingPolicy="UNAVAILABLE" styleClass="navigation-tabs">
                    <Tab text="ðŸ“ Folders" closable="false">
                        <TreeView fx:id="folderTreeView" styleClass="folder-tree" showRoot="false"/>
                    </Tab>
                    
                    <Tab text="ðŸ·ï¸ Tags" closable="false">
                        <ListView fx:id="tagListView" styleClass="tag-list"/>
                    </Tab>
                    
                    <Tab text="ðŸ“… Recent" closable="false">
                        <ListView fx:id="recentNotesListView" styleClass="recent-list"/>
                    </Tab>
                    
                    <Tab text="â­ Favorites" closable="false">
                        <ListView fx:id="favoritesListView" styleClass="favorites-list"/>
                    </Tab>
                </TabPane>
                
                <!-- Quick Actions -->
                <HBox styleClass="quick-actions" spacing="5" alignment="CENTER">
                    <padding>
                        <Insets top="10" right="5" bottom="10" left="5"/>
                    </padding>
                    <Button text="âž• Note" onAction="#handleNewNote" styleClass="quick-action-button"/>
                    <Button text="ðŸ“ Folder" onAction="#handleNewFolder" styleClass="quick-action-button"/>
                    <Button text="ðŸ·ï¸ Tag" onAction="#handleNewTag" styleClass="quick-action-button"/>
                </HBox>
            </VBox>
            
            <!-- Right Content Area -->
            <SplitPane fx:id="contentSplitPane" orientation="VERTICAL" dividerPositions="0.6">
                <!-- Notes List / Editor Area -->
                <SplitPane fx:id="editorSplitPane" dividerPositions="0.4">
                    <!-- Notes List -->
                    <VBox styleClass="notes-list-container">
                        <HBox styleClass="notes-header" alignment="CENTER_LEFT" spacing="10">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="Notes" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <ComboBox fx:id="sortComboBox" prefWidth="120" styleClass="sort-combo"/>
                            <Button text="ðŸ”„" onAction="#handleRefresh" styleClass="refresh-button"/>
                        </HBox>
                        
                        <ListView fx:id="notesListView" styleClass="notes-list" VBox.vgrow="ALWAYS"/>
                    </VBox>
                    
                    <!-- Note Editor -->
                    <VBox styleClass="editor-container">
                        <!-- Note Header -->
                        <HBox styleClass="note-header" alignment="CENTER_LEFT" spacing="10">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <TextField fx:id="noteTitleField" promptText="Note Title..." styleClass="note-title-field" HBox.hgrow="ALWAYS"/>
                            <Button text="â­" onAction="#handleToggleFavorite" styleClass="favorite-button"/>
                            <Button text="ðŸ—‘ï¸" onAction="#handleDeleteNote" styleClass="delete-button"/>
                        </HBox>
                        
                        <!-- Note Metadata -->
                        <HBox styleClass="note-metadata" alignment="CENTER_LEFT" spacing="15">
                            <padding>
                                <Insets top="5" right="10" bottom="5" left="10"/>
                            </padding>
                            <Label fx:id="createdDateLabel" text="Created: " styleClass="metadata-label"/>
                            <Label fx:id="modifiedDateLabel" text="Modified: " styleClass="metadata-label"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <FlowPane fx:id="tagsFlowPane" hgap="5" vgap="3" styleClass="tags-flow"/>
                        </HBox>
                        
                        <!-- Note Content Editor -->
                        <TextArea fx:id="noteContentArea" promptText="Start writing your note..." 
                                  styleClass="note-content" wrapText="true" VBox.vgrow="ALWAYS"/>
                        
                        <!-- Editor Toolbar -->
                        <HBox styleClass="editor-toolbar" alignment="CENTER_LEFT" spacing="5">
                            <padding>
                                <Insets top="5" right="10" bottom="5" left="10"/>
                            </padding>
                            <Button text="B" onAction="#handleBold" styleClass="format-button"/>
                            <Button text="I" onAction="#handleItalic" styleClass="format-button"/>
                            <Button text="U" onAction="#handleUnderline" styleClass="format-button"/>
                            <Separator orientation="VERTICAL"/>
                            <Button text="ðŸ”—" onAction="#handleLink" styleClass="format-button"/>
                            <Button text="ðŸ“·" onAction="#handleImage" styleClass="format-button"/>
                            <Button text="ðŸ“Ž" onAction="#handleAttachment" styleClass="format-button"/>
                            <Separator orientation="VERTICAL"/>
                            <Button text="ðŸ“‹" onAction="#handleTodoList" styleClass="format-button"/>
                            <Button text="ðŸ”¢" onAction="#handleNumberedList" styleClass="format-button"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="wordCountLabel" text="0 words" styleClass="word-count"/>
                        </HBox>
                    </VBox>
                </SplitPane>
                
                <!-- Preview / Attachments Area -->
                <TabPane fx:id="previewTabPane" styleClass="preview-tabs">
                    <Tab text="ðŸ“ Preview" closable="false">
                        <ScrollPane styleClass="preview-scroll">
                            <TextArea fx:id="previewTextArea" editable="false" styleClass="preview-text" wrapText="true"/>
                        </ScrollPane>
                    </Tab>
                    
                    <Tab text="ðŸ“Ž Attachments" closable="false">
                        <ListView fx:id="attachmentsListView" styleClass="attachments-list"/>
                    </Tab>
                    
                    <Tab text="ðŸ“Š Info" closable="false">
                        <VBox styleClass="info-container" spacing="15" alignment="TOP_LEFT">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <VBox spacing="5">
                                <Label text="Note Information" styleClass="info-section-title"/>
                                <GridPane hgap="10" vgap="5">
                                    <Label text="Created:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoCreatedLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="info-value"/>
                                    
                                    <Label text="Modified:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoModifiedLabel" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="info-value"/>
                                    
                                    <Label text="Words:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoWordsLabel" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="info-value"/>
                                    
                                    <Label text="Characters:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoCharsLabel" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="info-value"/>
                                </GridPane>
                            </VBox>
                            
                            <VBox spacing="5">
                                <Label text="Location" styleClass="info-section-title"/>
                                <GridPane hgap="10" vgap="5">
                                    <Label text="Latitude:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoLatitudeLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="info-value"/>
                                    
                                    <Label text="Longitude:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoLongitudeLabel" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="info-value"/>
                                </GridPane>
                            </VBox>
                            
                            <VBox spacing="5">
                                <Label text="Source" styleClass="info-section-title"/>
                                <GridPane hgap="10" vgap="5">
                                    <Label text="Author:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoAuthorLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="info-value"/>
                                    
                                    <Label text="Source URL:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="info-label"/>
                                    <Label fx:id="infoSourceUrlLabel" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="info-value"/>
                                </GridPane>
                            </VBox>
                        </VBox>
                    </Tab>
                </TabPane>
            </SplitPane>
        </SplitPane>
    </center>
    
    <!-- Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" alignment="CENTER_LEFT" spacing="15">
            <padding>
                <Insets top="5" right="10" bottom="5" left="10"/>
            </padding>
            <Label fx:id="statusLabel" text="Ready" styleClass="status-text"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="noteCountLabel" text="0 notes" styleClass="status-text"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="syncStatusLabel" text="Offline" styleClass="status-text"/>
        </HBox>
    </bottom>
    
</BorderPane>